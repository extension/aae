<h1><%= link_to @user.name, expert_user_path(@user) %></h1>

<h2>History</h2>

<% if current_user.id == @user.id %>
  <%= render :partial => 'expert/settings/settings_navigation' %>
<% end %>


<% @expert_events.each do |event| %>
    <% event.updated_user_attributes.each do |key, value| %>
      <% case event.event_code %> 
      <% when UserEvent::ADDED_LOCATION, UserEvent::ADDED_COUNTY %> 
        <p><%= link_expert_user_avatar(event.creator, :thumb) %> <%= link_expert_user(event.creator) %> Added <strong class="tag tag-geography"><%= value[:new] %></strong> to <strong><%= key.to_s.gsub('_', ' ') %></strong> <%= time_ago_in_words(event.created_at) %> ago <small><%= humane_date(event.created_at) %></small><p>
      <% when UserEvent::REMOVED_LOCATION, UserEvent::REMOVED_COUNTY %> 
        <p><%= link_expert_user_avatar(event.creator, :thumb) %> <%= link_expert_user(event.creator) %> Deleted <strong class="tag tag-geography"><%= value[:old] %></strong> from <strong><%= key.to_s.gsub('_', ' ') %></strong> <%= time_ago_in_words(event.created_at) %> ago <small><%= humane_date(event.created_at) %></small><p>
      <% else %>
        <p><%= link_expert_user_avatar(event.creator, :thumb) %> <%= link_expert_user(event.creator) %> Changed <strong><%= key.to_s.gsub('_', ' ').capitalize %></strong> from '<strong><%= value[:old] %></strong>' to '<strong><%= value[:new] %></strong>' <%= time_ago_in_words(event.created_at) %> ago <small><%= humane_date(event.created_at) %></small><p>
      <% end %>
    
      
	  <% if key.to_s == 'vacation_status' && value[:reason].present? %>
	    <p>Reason: <%= value[:reason] %></p>
	  <% end %>
    <% end %>
<% end %>


