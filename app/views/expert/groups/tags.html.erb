<h1><%= link_to @group.name, expert_group_path() %></h1>

<h3>Group Settings > Tags</h3>

<%= render :partial => 'expert/groups/settings_navigation' %>


<% if @group_tags.length > 0 %>
  <% @group_tags.each do |tag| %>
    <p><%= link_to tag.name, questions_by_tag_expert_groups_path(:group_id => @group.id, :tag_id => tag.id) %></p>
  <% end %>
<% else %>
  <p>There are no tags at this time.</p>
<% end %>

<div class="ui-widget" style="display:none;">
	<label>Tags: </label>
	<input id="tag_picker_single" size="200" style="width:20em; font-size:1.2em; padding:.25em;"/>
</div>



<div class="demo">

<div class="ui-widget">
	<label for="birds">Tags: </label>
	<input id="tag_picker" />
</div>

<div class="ui-widget" style="margin-top:2em; font-family:Arial">
	<div id="log" style="height: 200px; width: 300px; overflow: auto;" class="ui-widget-content"></div>
</div>

</div><!-- End demo -->

<script class="code" type="text/javascript">
$(function() {
		function log( message ) {
			$( "<div/>" ).text( message ).prependTo( "#log" );
			$( "#log" ).scrollTop( 0 );
		}
		
		function add_tag(tag) {
		  $.ajax({
        type: "POST",
        url: "<%= expert_groups_add_tag_path(:id => @group.id) %>",
        cache: false,
        data: {tag: tag}
      })
      .done(function() {
        log( tag ?
					tag + " (* aka " + tag + ")" :
					"Nothing selected, input was " + tag );
				$("#tag_picker").autocomplete(close)
				$("#tag_picker").val('');
				return false;
      })  
      .fail(function() { alert("error"); })
		}

		$("#tag_picker").autocomplete({
			source: "/expert/ajax/tags",
			minLength: 2,
			select: function(e) {
			  add_tag(this.value);
			}
		}).keypress(function(e) {
      if (e.keyCode === 13) {
        add_tag(this.value);
      }
    });
	});
</script>