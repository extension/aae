<h1>Locations</h1>

<div class='row'>
  <div class="col-md-12">
    <table class="table table-bordered">
      <thead>
        <tr>
          <th>Location</th>
          <th>Primary groups</th>
          <th>Office link</th>
        </tr>
      </thead>
      <tbody>
      <%- Location.displaylist.each do |location| -%>
        <tr>
          <td>
            <h2><%= link_to location.name, expert_location_path(id: location.id) %></h2>
            <p><%= link_to "View entry page", location_path(location.id), :class => "btn btn-default btn-xs" -%></p>
          </td>
          <td>
            <%- if(location.primary_groups.count >= 1) -%>
              <%- location.primary_groups.order(:name).each do |group| -%>
                <p>
                  <strong><%= group.name -%></strong>
                  <br /><small>(<%= group.assignees.count -%> members available)</small>
                </p>
              <%- end -%>
              <!-- Assignable groups? -->
              <%- if location.active_primary_groups.count < 1 -%>
                <p class="warning">This location has no assignable groups!</p>
              <%- end -%>
            <%- else -%>
              <p class="warning">No primary groups designated</p>
            <%- end -%>
            <%= link_to "Manage groups", primary_groups_expert_location_path(id: location.id), :class => "btn btn-default btn-xs" -%>
          </td>
          <td>
            <%- if location.office_link.blank? -%>
              No office link listed.
            <%- else -%>
              <%= link_to(location.office_link, location.office_link) -%>
            <%- end -%>
          </td>
        </tr>
      <%- end -%>
      </tbody>
    </table>
  </div>
</div>
